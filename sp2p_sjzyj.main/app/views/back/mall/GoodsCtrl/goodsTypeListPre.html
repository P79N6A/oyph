#{extends 'common/back/mallMain.html' /}
	#{set title:'积分商城 | 商品类型列表' /}
	#{set smallclass:0 /}
	#{set crumbs:'积分商城>商品类型列表'/}
	<div class="back-main">
	*{
	    #{form @back.mall.GoodsCtrl.goodsListPre(), id:'submit'}
    <!-- 搜索 -->
    <div class="xf_ht_search">
      <div class="xf_ht_search_l">
        <input type="hidden" id="orderType" name="orderType">
        <input type="hidden" id="orderStatus" name="orderStatus"/>
        <input type="hidden" id="currPage" name="currPage"/>
        <input type="hidden" id="pageSize" name="pageSize"/>
		<span id="div_0"><a id="tab_0" onClick="conditonSearch(0)">默认排序</a></span>
		<span id="div_1"><a id="tab_1" onClick="conditonSearch(1)">商品总数<a id="sp1">↑</a></a></span>
		<span id="div_2"><a id="tab_3" onClick="conditonSearch(2)">商品剩余数<a id="sp2">↑</a></a></span>
		<span id="div_3"><a id="tab_5" onClick="conditonSearch(3)">兑换积分<a id="sp3">↑</a></a></span>
		<span id="div_4"><a id="tab_6" onClick="conditonSearch(4)">添加时间<a id="sp4">↑</a></a></span>
      </div>
     </div>
     <div class="xf_ht_search_inon">
       <div class="xf_ht_search_r">
         <div class="xf_ht_search_xl">
           <select name="status" class="xf_membill_selectAge">
           	<option value="0" selected="selected">请选择</option>
           	<option value="1" #{if page.conditions?.status == 1} selected="selected" #{/if}>开启</option>
           	<option value="2" #{if page.conditions?.status == 2} selected="selected" #{/if}>暂停</option>
           </select>
         </div>
         <div class="xf_ht_search_xl">
           <input name="name" type="text" class="search_w"  value="${page.conditions?.name}" />
         </div>
         <div class="xf_ht_search_xl">
           <input type="submit" class="search_button" value="搜索">
         </div>
       </div>
     </div>
	#{/form}
	}*
	<!-- 头部筛选条件 -->
	<div class="back-usertop">
		<!-- 搜索按钮，控制搜索条件的显示隐藏 -->
		<div class="left back-usermenu">
		<a href="@{back.mall.GoodsCtrl.goodsListPre()}"  >商品列表</a>
		<a href="@{back.mall.GoodsCtrl.editGoodsPre(0,1)}" >新增商品</a>
		<a href="@{back.mall.GoodsCtrl.virtualGoodsPre()}" >虚拟商品</a>
		<a href="@{back.mall.GoodsCtrl.editGoodsTypePre()}" >新增商品分类</a>
		<a href="@{back.mall.GoodsCtrl.goodsTypeListPre()}" class="selected" >商品类型列表</a>
		
		</div>
		<!-- 右侧功能按钮 -->
		
	<div class="back-search-option" >
		<form action="@{back.mall.GoodsCtrl.goodsTypeListPre()}" method="GET" id="submit">
			<input type="hidden" id="currPage" name="currPage"/>
	  		<input type="hidden" id="pageSize" name="pageSize" value="${pageBean?.pageSize}"/>
	  		<input type="hidden" id="exports" name="exports"/><!--是否导出  -->
			<input type="submit" class="bgbtn" value="搜索" />
		</form>
	</div>
	
	</div>
	<div class="back-cont">
		<div class="back-box">
			<table width="100%" class="back-table table-fixed">
				<tr height="40">
					<th width="70" class="align-left">
						<span class="back-order">
							序号
						</span>
					</th>
			     <th>商品类型名称</th>
			     <th>图片</th>
			     <th>操作</th>
				</tr>
			#{if page?.page}
				#{list page?.page, as:'content'}
				<tr height="40">
					<td class="align-left">
						<label><input type="checkbox" class="back-tdcheck" />${(page?.currPage-1)*page?.pageSize + content_index}</label>
					</td>
				     <td>${content?.goods_type}</td>
				     <td><img alt="商品图片" title="" src="${content?.pic_path}" width="50px"/></td>
				    
				          	<td>         
				          	   <span><a class="xf_ta_onclick" href="@{back.mall.GoodsCtrl.deleteGoodsType(content?.id)}">删除</a></span>
				            <span><a class="xf_ta_onclick" href="@{back.mall.GoodsCtrl.editGoodsTypePre(content?.id,2)}">编辑</a></span>
			
				          	</td>
								</tr>
								#{/list}
									<!-- 表格数据统计 -->
								<tr height="40">
									<td colspan="4" class="back-lasttd">
										<!-- 分页组件--pageTag -->
										#{backPageTag page:page,showPage:"showPage"/}
									</td>
								</tr>
								<!-- 表格数据统计 -->
							#{/if}
							#{else}	
					<!-- 暂无记录 -->
					<tr height="58">
						<td colspan="4" class="back-nodata"><i class="iconfont">&#xe613;</i>暂无记录</td>
					</tr>
				</table>
			#{/else}
		</div>
	</div>
</div>
<script type="text/javascript">
  $(function() {
	  var orderType = "${page?.conditions?.orderType}";
	    $("#orderType").val(orderType);
	    var orderStatus = "${page?.conditions?.orderStatus}";
	    $("#orderStatus").val(orderStatus);
	    var order = $("#div_" + orderType);
		
	    /* 初始为默认搜索 */
		if(orderType == ''){
			$("#div_0").attr("class", "xf_sea_isshow");
		}else {
		  order.attr("class", "xf_sea_isshow");
		  if(orderStatus == 1){
		     $("#sp"+orderType).html("↑");
		  }else{
		    $("#sp"+orderType).html("↓");
		  }
		}
  })
  function showPage(currPage, pageSize){
	    $("#currPage").val(currPage);
	    $("#pageSize").val(pageSize);
	    $("#submit").submit();
	  }
  
   function conditonSearch(order){
	   var orderStatus = "${page?.conditions?.orderStatus}";
	   var orderType = "${page?.conditions?.orderType}";
		
		if(orderStatus == 1 && orderType == order){
			$("#orderStatus").val(0);
		}else{
			$("#orderStatus").val(1);
		}
		
		$("#orderType").val(order);
		$("#submit").submit();
   }

</script>
  </div>
</div>

