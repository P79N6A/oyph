#{extends 'common/back/riskMain.html' /}
	#{set title:'风控 | 理财项目' /}
	#{set smallclass:0 /}
	#{set crumbs:'风控>理财项目'/}
<style>
 	.tabtext{
 		text-align: right;
 		padding-left: 20px;
 	}
 	.tabinput{
 		padding-left:10px; 
 	}
 	.tabcheckbox{
 		vertical-align: middle;
 		margin-left: 30px;
 	}
 	
 	.tabnumber{
 		width: 160px;
 	}
 	
 	.trheight{
 		height: 50px;
 	}
 	.tdwidth{
 		width: 120px;
 	}
</style>

<div class="back-main">
	<!-- 头部筛选条件 -->
	<div class="back-usertop">
		<div class="left back-usermenu">
			<a href="@{back.risk.LoanMngCtrl.showBidPre(0)}" #{if showType==0} class="selected"#{/if}>所有</a>
			<a href="@{back.risk.LoanMngCtrl.showBidPre(1)}" #{if showType==1} class="selected"#{/if}>添加风控报告</a>
			<a href="@{back.risk.LoanMngCtrl.showBidPre(2)}" #{if showType==2} class="selected"#{/if}>待审核报告</a>
			<a href="@{back.risk.LoanMngCtrl.showBidPre(3)}" #{if showType==3} class="selected"#{/if}>审核通过报告</a>
			<a href="@{back.risk.LoanMngCtrl.showBidPre(4)}" #{if showType==4} class="selected"#{/if}>未通过报告</a>
			<a href="@{back.risk.LoanMngCtrl.showBidPre(5)}" #{if showType==5} class="selected"#{/if}>初审中</a>
			<a href="@{back.risk.LoanMngCtrl.showBidPre(6)}" #{if showType==6} class="selected"#{/if}>借款中</a>
			<a href="@{back.risk.LoanMngCtrl.showBidPre(7)}" #{if showType==7} class="selected"#{/if}>满标审核</a>
			<a href="@{back.risk.LoanMngCtrl.showBidPre(8)}" #{if showType==8} class="selected"#{/if}>还款中</a>
			<a href="@{back.risk.LoanMngCtrl.showBidPre(9)}" #{if showType==9} class="selected"#{/if}>已结束</a>
			<a href="@{back.risk.LoanMngCtrl.showBidPre(10)}" #{if showType==10} class="selected"#{/if}>失败</a>
		</div>
		
		<!-- 搜索按钮，控制搜索条件的显示隐藏 -->
		<div class="back-search left #{if numNo || projectName || userName}selected#{/if}">
			<i class="iconfont searchicon">&#xe60a;</i>搜索<i class="iconfont arrowicon">&#xe603;</i>
		</div>
		
		<!-- 右侧功能按钮 -->
		<div class="right back-rightbtns">
			<a href="javascript:exportList(1)"><i class="iconfont">&#xe612;</i>导出</a>
			#{rightMng rightId:401002}
			<a href="@{back.risk.LoanMngCtrl.createBidPre()}"><b class="iconfont">&#xe631;</b>发布</a>
			#{/rightMng}
		</div>
	</div>
	<!-- 搜索条件，默认隐藏 -->
	<div class="back-search-option" #{if numNo || projectName || userName}style="display: block;"#{/if}>
		<form action="@{back.risk.LoanMngCtrl.showBidPre()}" method="GET" id="showBidPre">
			<input type="hidden" id="orderType" name="orderType" value="${orderType}" /><!-- 排序的类型 -->
			<input type="hidden" id="orderValue" name="orderValue" value="${orderValue}" /><!-- 排序的值(0:降序，1:升序) -->
			<input type="hidden" id="currPage" name="currPage"/>
	  		<input type="hidden" id="pageSize" name="pageSize" value="${pageBean?.pageSize}"/>
	  		<input type="hidden" id="showType" name="showType" value="${showType}"/>
	  		<input type="hidden" id="exports" name="exports"/>
	  		
	  		<input type="text" class="iffocus" placeholder="编号" name="numNo" value="${numNo}" oninput="$(this).ndigitInteger(11)" onpropertychange="$(this).ndigitInteger(11)" data-title="输入字母后的数字编号"/> 
	  		<input type="text" class="iffocus" placeholder="项目" name="projectName" value="${projectName}" maxlength="15"/>
	  		<input type="text" class="iffocus" placeholder="借款人" name="userName" value="${userName}" maxlength="13"/>	  		
			<input type="submit" class="bgbtn" value="搜索" />
		</form>
	</div>
	<div class="back-cont">
		<div class="back-box">
			#{if showType!=1 && showType!=2 && showType!=3 && showType!=4}
			<table width="100%" class="back-table table-fixed">
				<tr height="40">
					<th width="70" class="align-left">
						<span class="back-order">
							编号
							#{backPageColumTag orderType:orderType,currOrderType:0,orderValue:orderValue,orderBy:'orderBy' /}
						</span>
					</th>
					<th>项目</th>
					<th>借款人</th>
					<th>
						<span class="back-order">
							借款金额
							#{backPageColumTag orderType:orderType,currOrderType:3,orderValue:orderValue,orderBy:'orderBy' /}
						</span>
					</th>
					<th>
						<span class="back-order">
							年利率
							#{backPageColumTag orderType:orderType,currOrderType:4,orderValue:orderValue,orderBy:'orderBy' /}
						</span>
					</th>
					<th>
						<span class="back-order">
							期限
							#{backPageColumTag orderType:orderType,currOrderType:5,orderValue:orderValue,orderBy:'orderBy' /}
						</span>
					</th>
					<th>
						<span class="back-order">
							筹款进度
							#{backPageColumTag orderType:orderType,currOrderType:6,orderValue:orderValue,orderBy:'orderBy' /}
						</span>
					</th>
					<th>
						<span class="back-order">
							发售时间
							#{backPageColumTag orderType:orderType,currOrderType:7,orderValue:orderValue,orderBy:'orderBy' /}
						</span>
					</th>
					<th width="80">状态</th>
					<th width="140">操作</th>
				</tr>
				#{if pageBean?.page}
					#{list pageBean?.page}
					<tr height="40">
						<td class="align-left">
							<input type="hidden" id="bidId" value="${_?.id}" name="bidId"/>
							<label><input type="checkbox" class="back-tdcheck" />${_?.bid_no}</label>
						</td>
						<td>
							<a #{rightMng rightId:401005} href="@{back.risk.LoanMngCtrl.showBidDetailPre(_?.id)}" #{/rightMng} class="back-table-title" data-title="${_?.title}" target="" >${_?.title}</a>
						</td>
						<td>
							${_?.name}
						</td>
						<td>
							${_?.amount?.format(common.constants.Constants.FINANCE_FORMATE_TAD)}
						</td>
						<td>
							${_?.apr}%
						</td>
						<td>
							${_?.period}${_?.period_unit?.getShowValue()}
						</td>
						<td>
							${_?.loan_schedule}%
						</td>
						<td>
							#{if _?.pre_release_time==null}----#{/if}
							#{else}
							${_?.pre_release_time?.format(common.constants.Constants.DATE_TIME_FORMATE)}
							#{/else}
						</td>
						<td>
							${_?.getStatus()?.value}
						</td>
						<td class="back-handle">
						#{rightMng rightId:401003}
							#{if models.core.entity.t_bid.Status.PREAUDITING.code==_?.status?.code}
							<a href="@{back.risk.LoanMngCtrl.toPreAuditBidPre(_?.id)}" data-title="初审" class="iconfont" id="pre_audit_href">&#xe61c;</a>
							#{/if}
							#{else}
							<a class="iconfont unable" id="pre_audit_href">&#xe61c;</a>
							#{/else}
						#{/rightMng}
						#{rightMng rightId:401004}
							#{if models.core.entity.t_bid.Status.FUNDRAISING.code==_?.status?.code||models.core.entity.t_bid.Status.AUDITING.code==_?.status?.code}
							<a href="@{back.risk.LoanMngCtrl.toAuditBidPre(_?.id)}" data-title="复审" class="iconfont" id="audit_href">&#xe62d;</a>
							#{/if}
							#{else}
							<a class="iconfont unable" id="audit_href">&#xe62d;</a>
							#{/else}
						#{/rightMng}
						</td>
					</tr>
					#{/list}
					表格数据统计
					<tr height="40">
						<td colspan="10" class="back-lasttd">
							<span class="back-choose left">
								<input type="button" id="chooseAll" value="全选" />
								<input type="button" id="chooseReverse" value="反选" />
							</span>
							<p class="back-table-totle left">
								合计&nbsp;借款金额&nbsp;<span>${totalAmt?.format(common.constants.Constants.FINANCE_FORMATE_NORMAL)}元</span>
							</p>
						#{backPageTag page:pageBean,showPage:"showBidPre"/}
						</td>
					</tr>
				#{/if}
				#{else}
					<tr height="58">
						<td colspan="10" class="back-nodata"><i class="iconfont">&#xe613;</i>暂无记录</td>
					</tr>
				#{/else}
			</table>
			#{/if}
			#{if showType==1}
			<div class="controls">
				<form action="@{back.risk.LoanMngCtrl.saveRiskReport()}" method="POST" id="saveRisk">
				<input type="hidden" id="imageUrl" name="filename" value="${bimgUrl}" >
				<input type="hidden" id="imageUrls" name="filenames" value="${bimgUrls}" >
				<input type="hidden" id="simageUrl" name="sfilename" value="${sbimgUrl}" >
				<input type="hidden" id="simageUrls" name="sfilenames" value="${sbimgUrls}" >
				<input type="hidden" id="cardImage" name="cardImages" value="${cardImageUrl}" >
				<input type="hidden" id="permitImage" name="permitImages" value="${permitImageUrl}" >
				<input type="hidden" id="driveImage" name="driveImages" value="${driveImageUrl}" >
				<input type="hidden" id="creditImage" name="creditImages" value="${creditImageUrl}" >
				<input type="hidden" id="flag" name="flag" value="" >
				<input type="hidden" name="reportId" value="${report?.id}" >
					#{include "back/risk/LoanMngCtrl/showEditPre.html" /}
						<table border="1" style="border: 1px dashed #ddd; width: 100%;">
						<tr class="trheight">
							<td colspan="10" style="font-weight: bold; padding-left: 20px;">借款人业务信息</td>
						</tr>
						<tr class="trheight">
							<td class="tabtext tdwidth">面谈时间： </td>
							<td class="tabinput">
					      		<input type="text" class="easyui-datetimeboxs" id="seeTime" name="seeTime" value="${report?.see_time?.format(common.constants.Constants.DATE_PLUGIN)}"  />
							</td>
							<td class="tabtext">面谈地点： </td>
							<td class="tabinput"><input type="text" name="seeAddress" value="${report?.see_address}" ></td>
							<td class="tabtext"><span class="spans-color">* </span>借款用途： </td>
							<td class="tabinput"><input type="text" name="loanPurpose" id="loanPurpose" value="${report?.loan_purpose}" onblur="checkPurpose()">
							<br><span style="color:red;" id="lp"></span></td>
							<td class="tabtext"><span class="spans-color">* </span>借款数额： </td>
							<td class="tabinput"><input type="number" name="loanAmount" id="loanAmount" onblur="checkAmount()" value="${report?.loan_amount?.format('0')}" class="tabnumber">
							<br><span style="color:red;" id="la"></span></td>
							<td class="tabtext">借款品种： </td>
							<td class="tabinput">
								<select name="loanKind">
									<option value="房贷" #{if report?.loan_kind=='房贷'} selected="selected" #{/if}>房贷</option>
									<option value="车贷" #{if report?.loan_kind=='车贷'} selected="selected" #{/if}>车贷</option>
									<option value="物资贷" #{if report?.loan_kind=='物资贷'} selected="selected" #{/if}>物资贷</option>
									<option value="信贷" #{if report?.loan_kind=='信贷'} selected="selected" #{/if}>信贷</option>
									<option value="其他" #{if report?.loan_kind=='其他'} selected="selected" #{/if}>其他</option>
								</select>
							</td>
						</tr>
						<tr class="trheight">
							<td class="tabtext">请注明借款品种 &nbsp;<br>（类型为其它的）：   </td>
							<td class="tabinput"><input type="text" name="loanClearKind" value="${report?.loan_clear_kind}" ></td>
							
							<td class="tabtext">劳动力报酬： </td>
							<td class="tabinput"><input type="number" name="laborReward" value="${report?.labor_reward}" ></td>
							
							<td class="tabtext">筹款时间： </td>
							<td class="tabinput">
								<select name="loanTime">
									<option value="1" #{if report?.loan_time==1} selected="selected" #{/if}>1天</option>
									<option value="2" #{if report?.loan_time==2} selected="selected" #{/if}>2天</option>
									<option value="3" #{if report?.loan_time==3} selected="selected" #{/if}>3天</option>
									<option value="4" #{if report?.loan_time==4} selected="selected" #{/if}>4天</option>
									<option value="5" #{if report?.loan_time==5} selected="selected" #{/if}>5天</option>
									<option value="6" #{if report?.loan_time==6} selected="selected" #{/if}>6天</option>
									<option value="7" #{if report?.loan_time==7} selected="selected" #{/if}>7天</option>
									<option value="8" #{if report?.loan_time==8} selected="selected" #{/if}>8天</option>
									<option value="9" #{if report?.loan_time==9} selected="selected" #{/if}>9天</option>
									<option value="10" #{if report?.loan_time==10} selected="selected" #{/if}>10天</option>
								</select>
							</td>
		
							<td class="tabtext">收入来源 &nbsp;<br>（几处）： </td>
							<td class="tabinput">
								<select name="incomeKinds">
									<option value="1" #{if report?.income_kinds?.code==1} selected="selected" #{/if}>1处</option>
									<option value="2" #{if report?.income_kinds?.code==2} selected="selected" #{/if}>2处</option>
									<option value="3" #{if report?.income_kinds?.code==3} selected="selected" #{/if}>3处及以上</option>
								</select>
							</td>
							<td class="tabtext">还款来源：</td>
							<td  class="tabinput" >
								<input type="text" name="backResource" value="${report?.back_resource}" >
							</td>
						</tr>
						<tr class="trheight">
							<td class="tabtext">房产情况：</td>
							<td class="tabinput"> <input type="text" name="houseCondition" value="${report?.house_condition}" ></td>
							<td class="tabtext">车产情况：</td>
							<td class="tabinput"> <input type="text" name="vehicleCondition" value="${report?.vehicle_condition}" ></td>
							<td class="tabtext">其他固定资产：</td>
							<td class="tabinput"> <input type="text" name="otherfixedCondition" value="${report?.otherfixed_condition}" ></td>
							<td class="tabtext">担保方式： </td>
							<td class="tabinput">
								<select name="guarantyKind">
									<option value="抵押" #{if report?.guaranty_kind=='抵押'} selected="selected" #{/if}>抵押</option>
									<option value="保证" #{if report?.guaranty_kind=='保证'} selected="selected" #{/if}>保证</option>
									<option value="质押" #{if report?.guaranty_kind=='质押'} selected="selected" #{/if}>质押</option>
									<option value="借用" #{if report?.guaranty_kind=='借用'} selected="selected" #{/if}>借用</option>
								</select>
							</td>
							<td class="tabtext">征信报告： </td>
							<td class="tabinput"><input type="checkbox" style="vertical-align: middle;" name="creditCondition" value="良好" #{if report?.credit_condition=='良好'} checked="checked" #{/if}> 良好</td>
						</tr>
						<tr class="trheight">
							<td class="tabtext">保证人姓名： </td>
							<td class="tabinput"><input type="text" name="guarantorName" value="${report?.guarantor_name}" ></td>
							<td class="tabtext">保证金额： </td>
							<td class="tabinput"><input type="number" name="guaranteeAmount" value="${report?.guarantee_amount}" class="tabnumber"></td>
							<td class="tabtext">抵押方式： </td>
							<td class="tabinput">
								<select name="pledgeKind">
									<option value="房产一抵" #{if report?.pledge_kind=='房产一抵'} selected="selected" #{/if}>房产一抵</option>
									<option value="房产二抵" #{if report?.pledge_kind=='房产二抵'} selected="selected" #{/if}>房产二抵</option>
									<option value="车辆质押" #{if report?.pledge_kind=='车辆质押'} selected="selected" #{/if}>车辆质押</option>
									<option value="车辆抵押" #{if report?.pledge_kind=='车辆抵押'} selected="selected" #{/if}>车辆抵押</option>
								</select> 
							</td>
							<td class="tabtext">是否属于本人： </td>
							<td class="tabinput">
								<select name="pledgeOwnership">
									<option value="1" #{if report?.pledge_ownership?.code==true} selected="selected" #{/if}>是</option>
									<option value="0" #{if report?.pledge_ownership?.code==false} selected="selected" #{/if}>否</option>
								</select>
							</td>
							
							<td class="tabtext">评估价格： </td>
							<td class="tabinput"><input type="number" name="evaluatePrice" value="${report?.evaluate_price}" class="tabnumber"></td>
						</tr>
						<tr class="trheight">
							<td class="tabtext">借款期限： </td>
							<td class="tabinput">
								<select name="loanTimeLimit">
									<option value="0.5" #{if report?.loan_time_limit=='0.5'} selected="selected" #{/if}>15天</option> 
									<option value="1" #{if report?.loan_time_limit=='1'} selected="selected" #{/if}>1个月</option>
									<option value="2" #{if report?.loan_time_limit=='2'} selected="selected" #{/if}>2个月</option>
									<option value="3" #{if report?.loan_time_limit=='3'} selected="selected" #{/if}>3个月</option>
									<option value="4" #{if report?.loan_time_limit=='4'} selected="selected" #{/if}>4个月</option>
									<option value="5" #{if report?.loan_time_limit=='5'} selected="selected" #{/if}>5个月</option>
									<option value="6" #{if report?.loan_time_limit=='6'} selected="selected" #{/if}>6个月</option>
									<option value="7" #{if report?.loan_time_limit=='7'} selected="selected" #{/if}>7个月</option>
									<option value="8" #{if report?.loan_time_limit=='8'} selected="selected" #{/if}>8个月</option>
									<option value="9" #{if report?.loan_time_limit=='9'} selected="selected" #{/if}>9个月</option>
									<option value="10" #{if report?.loan_time_limit=='10'} selected="selected" #{/if}>10个月</option>
									<option value="11" #{if report?.loan_time_limit=='11'} selected="selected" #{/if}>11个月</option>
									<option value="12" #{if report?.loan_time_limit=='12'} selected="selected" #{/if}>12个月</option>
									<option value="13" #{if report?.loan_time_limit=='13'} selected="selected" #{/if}>13个月</option>
									<option value="14" #{if report?.loan_time_limit=='14'} selected="selected" #{/if}>14个月</option>
									<option value="15" #{if report?.loan_time_limit=='15'} selected="selected" #{/if}>15个月</option>
									<option value="16" #{if report?.loan_time_limit=='16'} selected="selected" #{/if}>16个月</option>
									<option value="17" #{if report?.loan_time_limit=='17'} selected="selected" #{/if}>17个月</option>
									<option value="18" #{if report?.loan_time_limit=='18'} selected="selected" #{/if}>18个月</option>
									<option value="19" #{if report?.loan_time_limit=='19'} selected="selected" #{/if}>19个月</option>
									<option value="20" #{if report?.loan_time_limit=='20'} selected="selected" #{/if}>20个月</option>
									<option value="21" #{if report?.loan_time_limit=='21'} selected="selected" #{/if}>21个月</option>
									<option value="22" #{if report?.loan_time_limit=='22'} selected="selected" #{/if}>22个月</option>
									<option value="23" #{if report?.loan_time_limit=='23'} selected="selected" #{/if}>23个月</option>
									<option value="24" #{if report?.loan_time_limit=='24'} selected="selected" #{/if}>24个月</option>
									<option value="25" #{if report?.loan_time_limit=='25'} selected="selected" #{/if}>25个月</option>
									<option value="26" #{if report?.loan_time_limit=='26'} selected="selected" #{/if}>26个月</option>
									<option value="27" #{if report?.loan_time_limit=='27'} selected="selected" #{/if}>27个月</option>
									<option value="28" #{if report?.loan_time_limit=='28'} selected="selected" #{/if}>28个月</option>
									<option value="29" #{if report?.loan_time_limit=='29'} selected="selected" #{/if}>29个月</option>
									<option value="30" #{if report?.loan_time_limit=='30'} selected="selected" #{/if}>30个月</option>
									<option value="31" #{if report?.loan_time_limit=='31'} selected="selected" #{/if}>31个月</option>
									<option value="32" #{if report?.loan_time_limit=='32'} selected="selected" #{/if}>32个月</option>
									<option value="33" #{if report?.loan_time_limit=='33'} selected="selected" #{/if}>33个月</option>
									<option value="34" #{if report?.loan_time_limit=='34'} selected="selected" #{/if}>34个月</option>
									<option value="35" #{if report?.loan_time_limit=='35'} selected="selected" #{/if}>35个月</option>
									<option value="36" #{if report?.loan_time_limit=='36'} selected="selected" #{/if}>36个月</option>
								</select>
							</td>
							<td class="tabtext">贷款年利率：</td>
							<td class="tabinput">
							<input type="number" name="annualRate" value="${report?.annual_rate}" class="tabnumber"/>
							<i class="unit">%</i>
							</td>
							<td class="tabtext">是否贷过款： </td>
							<td class="tabinput">
								<select name="isLoanPass">
									<option value="1" #{if report?.is_loan_pass?.code==true} selected="selected" #{/if}>是</option>
									<option value="0" #{if report?.is_loan_pass?.code==false} selected="selected" #{/if}>否</option>
								</select>
							</td>
							<td class="tabtext">履约还款如何： </td>
							<td class="tabinput"><input type="text" name="backloanCondition" value="${report?.backloan_condition}"></td>
							<td class="tabtext">请选择分公司：</td>
							<td class="tabinput">
								<select name="branchCompany">
									#{list items:branchs, as: 'branch' }
										<option value="${branch.id}" #{if report?.branch_id==branch.id} selected="selected" #{/if}>${branch.branch_name}</option>
									#{/list}
								</select>
							</td>
						</tr>
						<tr class="trheight">
							<td class="tabtext">接待人员： </td>
							<td class="tabinput">
								<select name="receptionPerson">
									<option value="0">请选择</option>
									#{list items:riskList,as:'risk'}
										<option value="${risk.id}" #{if report?.reception_id==risk.id} selected='selected' #{/if}>${risk.reception_name}</option>
									#{/list}
								</select>
							</td>
							<td class="tabtext">申请人现住址： </td>
							<td class="tabinput"><input type="text" name="appAddress" value="${report?.app_address}"></td>
							<td class="tabtext">申请人学历： </td>
							<td class="tabinput">
								<select name="applicate">
									<option value="小学"  #{if report?.applicate=='小学'} selected="selected" #{/if}>小学</option>
									<option value="初中"  #{if report?.applicate=='初中'} selected="selected" #{/if}>初中</option>
									<option value="高中"  #{if report?.applicate=='高中'} selected="selected" #{/if}>高中</option>
									<option value="中技"  #{if report?.applicate=='中技'} selected="selected" #{/if}>中技</option>
									<option value="大专"  #{if report?.applicate=='大专'} selected="selected" #{/if}>大专</option>
									<option value="本科"  #{if report?.applicate=='本科'} selected="selected" #{/if}>本科</option>
									<option value="硕士"  #{if report?.applicate=='硕士'} selected="selected" #{/if}>硕士</option>
									<option value="博士"  #{if report?.applicate=='博士'} selected="selected" #{/if}>博士</option>
								</select>
							</td>
							<td class="tabtext">信用卡总额度： </td>
							<td class="tabinput"><input type="number" name="creditCardLimit" value="${report?.credit_card_limit}" class="tabnumber"></td>
							<td class="tabtext">银行负债情况： </td>
							<td class="tabinput"><input type="text" name="bankDebt" value="${report?.bank_debt}"></td>
						</tr>
						<tr class="trheight">
							<td class="tabtext">民间负债情况： </td>
							<td class="tabinput"><input type="text" name="folkDebt" value="${report?.folk_debt}"></td>
							<td class="tabtext">贷款记录： </td>
							<td class="tabinput"><input type="text" name="debtRecord" value="${report?.debt_record}"></td>
							<td class="tabtext">家庭地址： </td>
							<td class="tabinput"><input type="text" name="appHomeAddress" value="${report?.app_home_address}"></td>
							<td class="tabtext">申请人月收入： </td>
							<td class="tabinput"><input type="number" name="appMonthlyIncome" value="${report?.app_monthly_income}" class="tabnumber" ></td>
							<td class="tabtext">配偶月收入： </td>
							<td class="tabinput"><input type="number" name="pairMonthlyIncome" value="${report?.pair_monthly_income}" class="tabnumber"></td>
						</tr>
						<tr>
							<td class="tabtext" >添加身份信息图片：</td>
							<td colspan="9" style=" padding-right: 20px;" >
								<p style="height: 30px; text-align: right;"><input type="file" multiple="multiple" style="width: 70px;" id="CardImage" name="CardImage" value="添加图片" onchange="javascript:uploadCardImage()" /></p>
								<div id="CardImag">
									#{list items:cardImageList,as:'cards'}
										<img alt="" src="${cards.pic_path}" width="100px;" height="100px;" style="margin:10px;cursor:pointer" id="${cards.id}"> 
										<a href="javascript:deleteCardImage('${cards.id}','${cards.pic_path}')" id="${cards.id}">删除</a>
									#{/list}
								</div>
							</td>
						</tr>
						<tr>
							<td class="tabtext" >房本或车本图片：</td>
							<td colspan="9" style=" padding-right: 20px;" >
								<p style="height: 30px; text-align: right;"><input type="file" multiple="multiple" style="width: 70px;" id="PermitImage" name="PermitImage" value="添加图片" onchange="javascript:uploadPermitImage()" /></p>
								<div id="PermitImag">
									#{list items:permitImageList,as:'permits'}
										<img alt="" src="${permits.pic_path}" width="100px;" height="100px;" style="margin:10px;cursor:pointer" id="${permits.id}"> 
										<a href="javascript:deletePermitImage('${permits.id}','${permits.pic_path}')" id="${permits.id}">删除</a>
									#{/list}
								</div>
							</td>
						</tr>
						<tr>
							<td class="tabtext" >添加征信图片：</td>
							<td colspan="9" style=" padding-right: 20px;" >
								<p style="height: 30px; text-align: right;"><input type="file" multiple="multiple" style="width: 70px;" id="imgFile" name="imgFile" value="添加图片" onchange="javascript:upload()" /></p>
								<div id="img">
									#{list items:picList,as:'pic'}
										<img alt="" src="${pic.pic_path}" width="100px;" height="100px;" style="margin:10px;cursor:pointer" id="${pic.id}"> 
										<a href="javascript:deleteImg('${pic.id}','${pic.pic_path}')" id="${pic.id}">删除</a>
									#{/list}
								</div>
							</td>
						</tr>
						
						<tr>
							<td class="tabtext" >添加实物图片：</td>
							<td colspan="9" style=" padding-right: 20px;" >
								<p style="height: 30px; text-align: right;"><input type="file" multiple="multiple" style="width: 70px;" id="imgFiles" name="imgFiles" value="添加图片" onchange="javascript:uploadss()" /></p>	
								<div id="imgs">
									#{list items:picLists,as:'pics'}
										<img alt="" src="${pics.pic_path}" width="100px;" height="100px;" style="margin:10px;cursor:pointer" id="${pics.id}"> 
										<a href="javascript:deleteImgs('${pics.id}','${pics.pic_path}')" id="${pics.id}">删除</a>
									#{/list}
								</div>
							</td>
						</tr>
						
						<tr >
							<td class="tabtext" >添加经营状况图片：</td>
							<td colspan="9" style=" padding-right: 20px;" >
								<p style="height: 30px; text-align: right;"><input type="file" multiple="multiple" style="width: 70px;" id="simgFile" name="simgFile" value="添加图片" onchange="javascript:supload()" /></p>
								
								<div id="simg">
									#{list items:spicList,as:'spic'}
										<img alt="" src="${spic.pic_path}" width="100px;" height="100px;" style="margin:10px;cursor:pointer" id="${spic.id}"> 
										<a href="javascript:sdeleteImg('${spic.id}','${spic.pic_path}')" id="${spic.id}">删除</a>
									#{/list}
								</div>
							</td>
						</tr>
						
						<tr >
							<td class="tabtext" >现住址居住图片：</td>
							<td colspan="9" style=" padding-right: 20px;" >
								<p style="height: 30px; text-align: right;"><input type="file" multiple="multiple" style="width: 70px;" id="simgFiles" name="simgFiles" value="添加图片" onchange="javascript:suploads()" /></p>
								
								<div id="simgs">
									#{list items:spicLists,as:'spics'}
										<img alt="" src="${spics.pic_path}" width="100px;" height="100px;" style="margin:10px;cursor:pointer" id="${spics.id}"> 
										<a href="javascript:sdeleteImgs('${spics.id}','${spics.pic_path}')" id="${spics.id}">删除</a>
									#{/list}
								</div>
							</td>
						</tr>
						
						<tr >
							<td class="tabtext" >添加行驶证图片：</td>
							<td colspan="9" style=" padding-right: 20px;" >
								<p style="height: 30px; text-align: right;"><input type="file" multiple="multiple" style="width: 70px;" id="DriveImage" name="DriveImage" value="添加图片" onchange="javascript:suploadDriveImage()" /></p>
								
								<div id="DriveImag">
									#{list items:driveImageList,as:'drives'}
										<img alt="" src="${drives.pic_path}" width="100px;" height="100px;" style="margin:10px;cursor:pointer" id="${drives.id}"> 
										<a href="javascript:deleteDriveImage('${drives.id}','${drives.pic_path}')" id="${drives.id}">删除</a>
									#{/list}
								</div>
							</td>
						</tr>
						<tr >
							<td class="tabtext" >添加借款人征信报告：</td>
							<td colspan="9" style=" padding-right: 20px;" >
								<p style="height: 30px; text-align: right;"><input type="file" multiple="multiple" style="width: 70px;" id="CreditImage" name="CreditImage" value="添加图片" onchange="javascript:addCreditImage()" /></p>
								
								<div id="CreditImag">
									#{list items:creditImageList,as:'credits'}
										<img alt="" src="${credits.pic_path}" width="100px;" height="100px;" style="margin:10px;cursor:pointer" id="${credits.id}"> 
										<a href="javascript:deleteCreditImage('${credits.id}','${credits.pic_path}')" id="${credits.id}">删除</a>
									#{/list}
								</div>
							</td>
						</tr>
						<tr>
							<td class="tabtext" ><span class="spans-color">* </span>借款说明：</td>
							<td colspan="9" style="padding-left:10px;">
								<textarea rows="5" cols="200" style="resize:none; margin: 10px 0px 0px 0px;" name="loanState" onblur="checkState()" id="loanState">${report?.loan_state}</textarea><br>						
								20~2000个字符，例如：公司职员，现居吉林省吉林市，从事批发和零售业行业，工作收入稳定，贷款用于资金周转&nbsp;&nbsp;&nbsp;<span style="color: red;" id="ls"></span>      
							</td>
						</tr>
						<tr>
							<td class="tabtext" >勘察师意见：</td>
							<td colspan="9" style="padding-left:10px;">
								<textarea rows="5" cols="200" style="resize:none; margin: 10px 0px;" name="techOpinion">${report?.tech_opinion}</textarea>
							</td>
						</tr>
						<tr>
							<td class="tabtext" >添加风控意见：</td>
							<td colspan="9" style="padding-left:10px;">
								<textarea rows="5" cols="200" style="resize:none; margin: 10px 0px;" name="riskOpinion"></textarea>
							</td>
						</tr>
					</table>
					
					<p class="back-audit-btns" style="padding-bottom: 20px;">
						<input type="button" id="page" value="保存" class="bbtn" onclick="saveRisk()"/>
						<input type="button" id="pageSave" value="提交" class="bgbtn" onclick="submitRisk()">
						<input type="button" value="取消" class="bdbtn" onclick="backAndRefresh('@{back.risk.LoanMngCtrl.showBidPre}');">
				    </p>
				</form>
			</div>
			#{/if}
			#{if showType==2 || showType==3 || showType==4 }
				<table width="100%" class="back-table table-fixed">
				<tr height="40">
					<th width="70" class="align-left">
						<span class="back-order">
							编号	
						</span>
					</th>
					<th>申请人</th>
					<th>联系电话</th>
					<th>
						<span class="back-order">
							借款金额
						</span>
					</th>
					<th>
						<span class="back-order">
							借款期限
						</span>
					</th>
					<th>
						<span class="back-order">
							借款利率
						</span>
					</th>
					<th>
						<span class="back-order">
							抵押类型
						</span>
					</th>
					<th>
						<span class="back-order">
							抵押物评估价
						</span>
					</th>
					<th width="80">状态</th>
					<th width="140">操作</th>
				</tr>
				#{if pageBean?.page}
					#{list pageBean?.page}
					<tr height="40">
						<td class="align-left">
							<label><input type="checkbox" class="back-tdcheck" />${_?.id}</label>
						</td>
						<td>
							${_?.app_name}
						</td>
						<td>
							${_?.app_phone}
						</td>
						<td>
							${_?.loan_amount}
						</td>
						<td>
							${_?.loan_time_limit}
						</td>
						<td>
							${_?.annual_rate}
						</td>
						<td>
							${_?.loan_kind}
						</td>
						<td>
							${_?.evaluate_price}
						</td>
						<td>
							#{if _?.status?.code==1}
								<span style="color:green">${_?.status?.value}</span>
							#{/if}
							#{if _?.status?.code==2}
								<span style="color:red">${_?.status?.value}</span>
							#{/if}
							#{if _?.status?.code==3}
								<span style="color:blue">${_?.status?.value}</span>
							#{/if}
							#{if _?.status?.code==0}
								${_?.status?.value}
							#{/if}
						</td>
						<td class="back-handle">
							#{if _?.status?.code==3} 
							<a href="@{back.risk.LoanMngCtrl.toEditRiskReportPre(_?.id)}" data-title="编辑" class="iconfont">&#xe602;</a>
							#{/if}
							<a href="@{back.risk.LoanMngCtrl.toPreAuditRiskReportPre(_?.id)}" data-title="查看" class="iconfont" id="pre_audit_href">&#xe61c;</a>
						</td>
					</tr>
					#{/list}
					表格数据统计
					<tr height="40">
						<td colspan="10" class="back-lasttd">
							<span class="back-choose left">
								<input type="button" id="chooseAll" value="全选" />
								<input type="button" id="chooseReverse" value="反选" />
							</span>
							
						
						#{backPageTag page:pageBean,showPage:"showBidPre"/}
						</td>
					</tr>
				#{/if}
				#{else}
					<tr height="58">
						<td colspan="10" class="back-nodata"><i class="iconfont">&#xe613;</i>暂无记录</td>
					</tr>
				#{/else}
			</table>
			#{/if}
		</div>
	</div>
</div>


<!-- 页面js -->
<script type="text/javascript">
	require(["back"],function(back){
		// 搜索 排序 选中
		require(["search","linechecked","datatime"],function(){
		});
	});
	function showBidPre (currPage, pageSize) {
		$("#currPage").val(currPage);
		$("#pageSize").val(pageSize);
		
		$("#showBidPre").submit();
	}
	
	function orderBy(orderType,orderValue){
		$("#showBidPre input[name='orderType']").val(orderType);
		$("#showBidPre input[name='orderValue']").val(orderValue);
		
		$("#showBidPre input[name='currPage']").val(1);
		
		$("#showBidPre").submit();
	}
	
	function exportList(expor){
		$("#exports").val(expor);
		
		$("#showBidPre").submit();
		$("#exports").val(0);
	}
</script>

<!--上传图片  -->
<script type="text/javascript">

//身份信息图片添加
var imgCountCardImage= ${cardImageCount};
var imgUrlCardImage= $('#cardImage').val();
function uploadCardImage(){
	
	var obj = document.getElementById("CardImage");
	var len=obj.files.length;
	var paths = obj.files;  
	if(paths.length==0)  
	{  
	    alert("请选择文件");  
	    return;  
	}  
	          
	var formData = new FormData();  
	//alert(paths.length);  
	    //我们遍历每一个文件对象  
	for (var i = 0; i < paths.length; i++) {  
	    var file = paths[i];  
	    //alert(file.type);  
	           //用正则表达式判断文件的类型是否是图片，这里大家可以自由发挥  
	    if (!new RegExp("image/*").test(file.type)) {  
	        alert("请注意，上传的文件一定要是图片文件");  
	                return;  
	    }   
	}  
	//alert("开始上传");  
	   //我们可以预先定义一个FormData对象  
	var formData=new FormData();  
	          
	for(var i=0;i<paths.length;i++)  
	{  
	            //将每个文件设置一个string类型的名字，放入到formData中，这里类似于setAttribute("",Object)  
	    formData.append(paths[i].name,paths[i]);  
	}  
	          
	          
	$.ajax({  
	              
	     url: '@{back.webOperation.AdvertisementMngCtrl.uploadAdsImages()}',
	     type: 'POST',  
	     cache: false,  
	     data:formData,  
	             //这个参数是jquery特有的，不进行序列化，因为我们不是json格式的字符串，而是要传文件  
	     processData: false,  
	           //注意这里一定要设置contentType:false，不然会默认为传的是字符串，这样文件就传不过去了  
	     contentType: false,  
	     success:function(result)  
	     {   
	    	 if(result.code == 1){
	    		 
					var data = result.objs;
					for(var j=0;j<data.length;j++){
						if(imgCountCardImage == 0){
							$("#CardImag").html("") ;
							imgUrlCardImage = data[j].staticFileName ;
						}else{
							imgUrlCardImage = imgUrlCardImage+"+"+ data[j].staticFileName ;
						}
						$("#CardImag").append("<img src='"+data[j].staticFileName+"' class='backupimg' height='50' width='100' style='margin:10px;cursor:pointer' id='"+data[j].staticFileName+"'/>").append("<a href=\"javascript:deleteCardImage('"+data[j].staticFileName+"','"+data[j].staticFileName+"')\" id='"+data[j].staticFileName+"'>删除</a>").append("\t"); 
						$("#cardImage").val(imgUrlCardImage);
						imgCountCardImage = imgCountCardImage+1 ;
						//$("#imageUrl").val(imgUrl);
						
					}
				} else {
					alert(result.msg);
				}   
	    }  
	});  
}

//房本或车本图片添加
var imgCountPermitImage= ${permitImageCount};
var imgUrlPermitImage= $('#permitImage').val();
function uploadPermitImage(){
	
	var obj = document.getElementById("PermitImage");
	var len=obj.files.length;
	var paths = obj.files;  
	if(paths.length==0)  
	{  
	    alert("请选择文件");  
	    return;  
	}  
	          
	var formData = new FormData();  
	//alert(paths.length);  
	    //我们遍历每一个文件对象  
	for (var i = 0; i < paths.length; i++) {  
	    var file = paths[i];  
	    //alert(file.type);  
	           //用正则表达式判断文件的类型是否是图片，这里大家可以自由发挥  
	    if (!new RegExp("image/*").test(file.type)) {  
	        alert("请注意，上传的文件一定要是图片文件");  
	                return;  
	    }   
	}  
	//alert("开始上传");  
	   //我们可以预先定义一个FormData对象  
	var formData=new FormData();  
	          
	for(var i=0;i<paths.length;i++)  
	{  
	            //将每个文件设置一个string类型的名字，放入到formData中，这里类似于setAttribute("",Object)  
	    formData.append(paths[i].name,paths[i]);  
	}  
	          
	          
	$.ajax({  
	              
	     url: '@{back.webOperation.AdvertisementMngCtrl.uploadAdsImages()}',
	     type: 'POST',  
	     cache: false,  
	     data:formData,  
	             //这个参数是jquery特有的，不进行序列化，因为我们不是json格式的字符串，而是要传文件  
	     processData: false,  
	           //注意这里一定要设置contentType:false，不然会默认为传的是字符串，这样文件就传不过去了  
	     contentType: false,  
	     success:function(result)  
	     {   
	    	 if(result.code == 1){
	    		 
					var data = result.objs;
					for(var j=0;j<data.length;j++){
						if(imgCountPermitImage == 0){
							$("#PermitImag").html("") ;
							imgUrlPermitImage = data[j].staticFileName ;
						}else{
							imgUrlPermitImage = imgUrlPermitImage+"+"+ data[j].staticFileName ;
						}
						$("#PermitImag").append("<img src='"+data[j].staticFileName+"' class='backupimg' height='50' width='100' style='margin:10px;cursor:pointer' id='"+data[j].staticFileName+"'/>").append("<a href=\"javascript:deletePermitImage('"+data[j].staticFileName+"','"+data[j].staticFileName+"')\" id='"+data[j].staticFileName+"'>删除</a>").append("\t"); 
						$("#permitImage").val(imgUrlPermitImage);
						imgCountPermitImage = imgCountPermitImage+1 ;
						//$("#imageUrl").val(imgUrl);
						
					}
				} else {
					alert(result.msg);
				}   
	    }  
	});  
}

//行驶证图片添加
var imgCountDriveImage= ${driveImageCount};
var imgUrlDriveImage= $('#driveImage').val();
function suploadDriveImage() {
	var obj = document.getElementById("DriveImage");
	var len=obj.files.length;
	var paths = obj.files;  
	if(paths.length==0)  
	{  
	    alert("请选择文件");  
	    return;  
	}  
	          
	var formData = new FormData();  
	//alert(paths.length);  
	    //我们遍历每一个文件对象  
	for (var i = 0; i < paths.length; i++) {  
	    var file = paths[i];  
	    //alert(file.type);  
	           //用正则表达式判断文件的类型是否是图片，这里大家可以自由发挥  
	    if (!new RegExp("image/*").test(file.type)) {  
	        alert("请注意，上传的文件一定要是图片文件");  
	                return;  
	    }   
	}  
	//alert("开始上传");  
	   //我们可以预先定义一个FormData对象  
	var formData=new FormData();  
	          
	for(var i=0;i<paths.length;i++)  
	{  
	            //将每个文件设置一个string类型的名字，放入到formData中，这里类似于setAttribute("",Object)  
	    formData.append(paths[i].name,paths[i]);  
	}  
	          
	          
	$.ajax({  
	              
	     url: '@{back.webOperation.AdvertisementMngCtrl.uploadAdsImages()}',
	     type: 'POST',  
	     cache: false,  
	     data:formData,  
	             //这个参数是jquery特有的，不进行序列化，因为我们不是json格式的字符串，而是要传文件  
	     processData: false,  
	           //注意这里一定要设置contentType:false，不然会默认为传的是字符串，这样文件就传不过去了  
	     contentType: false,  
	     success:function(result)  
	     {   
	    	 if(result.code == 1){
	    		 
					var data = result.objs;
					for(var j=0;j<data.length;j++){
						if(imgCountDriveImage == 0){
							$("#DriveImag").html("") ;
							imgUrlDriveImage = data[j].staticFileName ;
						}else{
							imgUrlDriveImage = imgUrlDriveImage+"+"+ data[j].staticFileName ;
						}
						$("#DriveImag").append("<img src='"+data[j].staticFileName+"' class='backupimg' height='50' width='100' style='margin:10px;cursor:pointer' id='"+data[j].staticFileName+"'/>").append("<a href=\"javascript:deleteDriveImage('"+data[j].staticFileName+"','"+data[j].staticFileName+"')\" id='"+data[j].staticFileName+"'>删除</a>").append("\t"); 
						$("#driveImage").val(imgUrlDriveImage);
						imgCountDriveImage = imgCountDriveImage+1 ;
						//$("#imageUrl").val(imgUrl);
						
					}
				} else {
					alert(result.msg);
				}   
	    }  
	});	
}
//添加借款人征信报告
var imgCountCreditImage= ${creditImageCount};
var imgUrlCreditImag= $('#creditImage').val();
function addCreditImage() {
	var obj = document.getElementById("CreditImage");
	var len=obj.files.length;
	var paths = obj.files;  
	if(paths.length==0)  
	{  
	    alert("请选择文件");  
	    return;  
	}  
	          
	var formData = new FormData();  
	//alert(paths.length);  
	    //我们遍历每一个文件对象  
	for (var i = 0; i < paths.length; i++) {  
	    var file = paths[i];  
	    //alert(file.type);  
	           //用正则表达式判断文件的类型是否是图片，这里大家可以自由发挥  
	    if (!new RegExp("image/*").test(file.type)) {  
	        alert("请注意，上传的文件一定要是图片文件");  
	                return;  
	    }   
	}  
	//alert("开始上传");  
	   //我们可以预先定义一个FormData对象  
	var formData=new FormData();  
	          
	for(var i=0;i<paths.length;i++)  
	{  
	            //将每个文件设置一个string类型的名字，放入到formData中，这里类似于setAttribute("",Object)  
	    formData.append(paths[i].name,paths[i]);  
	}  
	          
	          
	$.ajax({  
	              
	     url: '@{back.webOperation.AdvertisementMngCtrl.uploadAdsImages()}',
	     type: 'POST',  
	     cache: false,  
	     data:formData,  
	             //这个参数是jquery特有的，不进行序列化，因为我们不是json格式的字符串，而是要传文件  
	     processData: false,  
	           //注意这里一定要设置contentType:false，不然会默认为传的是字符串，这样文件就传不过去了  
	     contentType: false,  
	     success:function(result)  
	     {   
	    	 if(result.code == 1){
	    		 
					var data = result.objs;
					for(var j=0;j<data.length;j++){
						if(imgCountCreditImage == 0){
							$("#CreditImag").html("") ;
							imgUrlCreditImag = data[j].staticFileName ;
						}else{
							imgUrlCreditImag = imgUrlCreditImag+"+"+ data[j].staticFileName ;
						}
						$("#CreditImag").append("<img src='"+data[j].staticFileName+"' class='backupimg' height='50' width='100' style='margin:10px;cursor:pointer' id='"+data[j].staticFileName+"'/>").append("<a href=\"javascript:deleteCreditImage('"+data[j].staticFileName+"','"+data[j].staticFileName+"')\" id='"+data[j].staticFileName+"'>删除</a>").append("\t"); 
						$("#creditImage").val(imgUrlCreditImag);
						imgCountCreditImage = imgCountCreditImage+1 ;
						//$("#imageUrl").val(imgUrl);
						
					}
				} else {
					alert(result.msg);
				}   
	    }  
	});	
}
var imgCount= ${picCount} ;
var imgUrl= $('#imageUrl').val();

function upload(){
	
var obj = document.getElementById("imgFile");
var len=obj.files.length;
	var paths = obj.files;  
	if(paths.length==0)  
	{  
	    alert("请选择文件");  
	    return;  
	}  
	          
	var formData = new FormData();  
	//alert(paths.length);  
	    //我们遍历每一个文件对象  
	for (var i = 0; i < paths.length; i++) {  
	    var file = paths[i];  
	    //alert(file.type);  
	           //用正则表达式判断文件的类型是否是图片，这里大家可以自由发挥  
	    if (!new RegExp("image/*").test(file.type)) {  
	        alert("请注意，上传的文件一定要是图片文件");  
	                return;  
	    }   
	}  
	//alert("开始上传");  
	   //我们可以预先定义一个FormData对象  
	var formData=new FormData();  
	          
	for(var i=0;i<paths.length;i++)  
	{  
	            //将每个文件设置一个string类型的名字，放入到formData中，这里类似于setAttribute("",Object)  
	    formData.append(paths[i].name,paths[i]);  
	}  
	          
	          
	$.ajax({  
	              
	     url: '@{back.webOperation.AdvertisementMngCtrl.uploadAdsImages()}',
	     type: 'POST',  
	     cache: false,  
	     data:formData,  
	             //这个参数是jquery特有的，不进行序列化，因为我们不是json格式的字符串，而是要传文件  
	     processData: false,  
	           //注意这里一定要设置contentType:false，不然会默认为传的是字符串，这样文件就传不过去了  
	     contentType: false,  
	     success:function(result)  
	     {   
	    	 if(result.code == 1){
	    		 
					var data = result.objs;
					for(var j=0;j<data.length;j++){
						if(imgCount == 0){
							$("#img").html("") ;
							imgUrl = data[j].staticFileName ;
						}else{
							imgUrl = imgUrl+"+"+ data[j].staticFileName ;
						}
						$("#img").append("<img src='"+data[j].staticFileName+"' class='backupimg' height='50' width='100' style='margin:10px;cursor:pointer' id='"+data[j].staticFileName+"'/>").append("<a href=\"javascript:deleteImg('"+data[j].staticFileName+"','"+data[j].staticFileName+"')\" id='"+data[j].staticFileName+"'>删除</a>").append("\t"); 
						$("#url").html("<a href='javascript:pic();'><span>"+imgUrl+"</span></a><br><br>");
						$("#imageUrl").val(imgUrl);
						imgCount = imgCount+1 ;
						//$("#imageUrl").val(imgUrl);
						
					}
				} else {
					alert(result.msg);
				}   
	    }  
	});  
}

var imgCounts= ${picCounts} ;
var imgUrls= $('#imageUrls').val();

function uploadss(){
	
	var obj = document.getElementById("imgFiles");
	var len=obj.files.length;
		var paths = obj.files;  
		if(paths.length==0)  
		{  
		    alert("请选择文件");  
		    return;  
		}  
		          
		var formData = new FormData();  
		//alert(paths.length);  
		    //我们遍历每一个文件对象  
		for (var i = 0; i < paths.length; i++) {  
		    var file = paths[i];  
		    //alert(file.type);  
		           //用正则表达式判断文件的类型是否是图片，这里大家可以自由发挥  
		    if (!new RegExp("image/*").test(file.type)) {  
		        alert("请注意，上传的文件一定要是图片文件");  
		                return;  
		    }   
		}  
		//alert("开始上传");  
		   //我们可以预先定义一个FormData对象  
		var formData=new FormData();  
		          
		for(var i=0;i<paths.length;i++)  
		{  
		            //将每个文件设置一个string类型的名字，放入到formData中，这里类似于setAttribute("",Object)  
		    formData.append(paths[i].name,paths[i]);  
		}  
		          
		          
		$.ajax({  
		              
		     url: '@{back.webOperation.AdvertisementMngCtrl.uploadAdsImages()}',
		     type: 'POST',  
		     cache: false,  
		     data:formData,  
		             //这个参数是jquery特有的，不进行序列化，因为我们不是json格式的字符串，而是要传文件  
		     processData: false,  
		           //注意这里一定要设置contentType:false，不然会默认为传的是字符串，这样文件就传不过去了  
		     contentType: false,  
		     success:function(result)  
		     {   
		    	 if(result.code == 1){
		    		 
						var data = result.objs;
						for(var j=0;j<data.length;j++){
							if(imgCounts == 0){
								$("#imgs").html("") ;
								imgUrls = data[j].staticFileName ;
							}else{
								imgUrls = imgUrls+"+"+ data[j].staticFileName ;
							}
							$("#imgs").append("<img src='"+data[j].staticFileName+"' class='backupimg' height='50' width='100' style='margin:10px;cursor:pointer' id='"+data[j].staticFileName+"'/>").append("<a href=\"javascript:deleteImgs('"+data[j].staticFileName+"','"+data[j].staticFileName+"')\" id='"+data[j].staticFileName+"'>删除</a>").append("\t"); 
							//$("#url").html("<a href='javascript:pic();'><span>"+imgUrl+"</span></a><br><br>");
							$("#imageUrls").val(imgUrls);
							imgCounts = imgCounts+1 ;
							//$("#imageUrl").val(imgUrl);
							
						}
					} else {
						alert(result.msg);
					}   
		    }  
		});  
	}



var simgCount= ${spicCount};
var simgUrl= $('#simageUrl').val();

function supload(){
	
var obj = document.getElementById("simgFile");
var len=obj.files.length;
	var paths = obj.files;  
	if(paths.length==0)  
	{  
	    alert("请选择文件");  
	    return;  
	}  
	          
	var formData = new FormData();  
	//alert(paths.length);  
	    //我们遍历每一个文件对象  
	for (var i = 0; i < paths.length; i++) {  
	    var file = paths[i];  
	    //alert(file.type);  
	           //用正则表达式判断文件的类型是否是图片，这里大家可以自由发挥  
	    if (!new RegExp("image/*").test(file.type)) {  
	        alert("请注意，上传的文件一定要是图片文件");  
	                return;  
	    }   
	}  
	//alert("开始上传");  
	   //我们可以预先定义一个FormData对象  
	var formData=new FormData();  
	          
	for(var i=0;i<paths.length;i++)  
	{  
	            //将每个文件设置一个string类型的名字，放入到formData中，这里类似于setAttribute("",Object)  
	    formData.append(paths[i].name,paths[i]);  
	}  
	          
	          
	$.ajax({  
	              
	     url: '@{back.webOperation.AdvertisementMngCtrl.uploadAdsImages()}',
	     type: 'POST',  
	     cache: false,  
	     data:formData,  
	             //这个参数是jquery特有的，不进行序列化，因为我们不是json格式的字符串，而是要传文件  
	     processData: false,  
	           //注意这里一定要设置contentType:false，不然会默认为传的是字符串，这样文件就传不过去了  
	     contentType: false,  
	     success:function(result)  
	     {   
	    	 if(result.code == 1){
	    		 
					var data = result.objs;
					for(var j=0;j<data.length;j++){
						if(simgCount == 0){
							$("#simg").html("") ;
							simgUrl = data[j].staticFileName ;
						}else{
							simgUrl = simgUrl+"+"+ data[j].staticFileName ;
						}
						$("#simg").append("<img src='"+data[j].staticFileName+"' class='backupimg' height='50' width='100' style='margin:10px;cursor:pointer' id='"+data[j].staticFileName+"'/>").append("<a href=\"javascript:sdeleteImg('"+data[j].staticFileName+"','"+data[j].staticFileName+"')\" id='"+data[j].staticFileName+"'>删除</a>").append("\t"); 
						$("#simageUrl").val(simgUrl);
						simgCount = simgCount+1;
					}
				} else {
					alert(result.msg);
				}   
	    }  
	});  
}

var simgCounts= ${spicCounts};
var simgUrls= $('#simageUrls').val();

function suploads(){
	
var obj = document.getElementById("simgFiles");
var len=obj.files.length;
	var paths = obj.files;  
	if(paths.length==0)  
	{  
	    alert("请选择文件");  
	    return;  
	}  
	          
	var formData = new FormData();  
	//alert(paths.length);  
	    //我们遍历每一个文件对象  
	for (var i = 0; i < paths.length; i++) {  
	    var file = paths[i];  
	    //alert(file.type);  
	           //用正则表达式判断文件的类型是否是图片，这里大家可以自由发挥  
	    if (!new RegExp("image/*").test(file.type)) {  
	        alert("请注意，上传的文件一定要是图片文件");  
	                return;  
	    }   
	}  
	//alert("开始上传");  
	   //我们可以预先定义一个FormData对象  
	var formData=new FormData();  
	          
	for(var i=0;i<paths.length;i++)  
	{  
	            //将每个文件设置一个string类型的名字，放入到formData中，这里类似于setAttribute("",Object)  
	    formData.append(paths[i].name,paths[i]);  
	}  
	          
	          
	$.ajax({  
	              
	     url: '@{back.webOperation.AdvertisementMngCtrl.uploadAdsImages()}',
	     type: 'POST',  
	     cache: false,  
	     data:formData,  
	             //这个参数是jquery特有的，不进行序列化，因为我们不是json格式的字符串，而是要传文件  
	     processData: false,  
	           //注意这里一定要设置contentType:false，不然会默认为传的是字符串，这样文件就传不过去了  
	     contentType: false,  
	     success:function(result)  
	     {   
	    	 if(result.code == 1){
	    		 
					var data = result.objs;
					for(var j=0;j<data.length;j++){
						if(simgCounts == 0){
							$("#simgs").html("") ;
							simgUrls = data[j].staticFileName ;
						}else{
							simgUrls = simgUrls+"+"+ data[j].staticFileName ;
						}
						$("#simgs").append("<img src='"+data[j].staticFileName+"' class='backupimg' height='50' width='100' style='margin:10px;cursor:pointer' id='"+data[j].staticFileName+"'/>").append("<a href=\"javascript:sdeleteImgs('"+data[j].staticFileName+"','"+data[j].staticFileName+"')\" id='"+data[j].staticFileName+"'>删除</a>").append("\t"); 
						$("#simageUrls").val(simgUrls);
						simgCounts = simgCounts+1;
					}
				} else {
					alert(result.msg);
				}   
	    }  
	});  
}

function reduce(id,type){
var num = $("#"+id).val() ;
if(type == 0 ){
	if(num > 1 ){
		num = num -1 ;
		$("#"+id).val(num) ;
	}
}

if( type == 1 ){
	num = num-1+2 ;
	$("#"+id).val(num) ;
}
}

//图片裁剪成功，回调函数 
var cropImgSuccess = function(data) {
$("#image").attr("src", data.staticFileName);
$("#imageUrl").val(data.staticFileName);
$("#imageSize").val(data.size+"kb");
$("#imageResolution").val(data.imageResolution);
$("#resolutionshow").html(data.imageResolution);
$("#sizeshow").html(data.size+"kb");
}

//身份证图片删除
function deleteCardImage(idd,id){
	
	var lengths=idd.indexOf('Signature=')
	var route=idd.slice(0,lengths+10)+encodeURIComponent(idd.slice(lengths+10));
	var lengthss=id.indexOf('Signature=')
	var path=id.slice(0,lengthss+10)+encodeURIComponent(id.slice(lengthss+10));
	console.log(lengths)
	console.log(route)
	console.log(path)
	$("img[id='"+route+"']").attr("checked", true).remove();
	$("a[id='"+route+"']").attr("checked", true).remove();
	var ids=imgUrlCardImage;
	var strs=new Array();
	strs=ids.split("+");
	for(i=0;i<strs.length;i++){
		if(strs.length==1){
		 ids=ids.replace(path,"");
		 imgUrlCardImage=imgUrlCardImage.replace(path,"");
		}
		if(strs.length>1){
			if(strs[0]==path){
				ids=ids.replace((path+"+"),"");
				imgUrlCardImage=imgUrlCardImage.replace((path+"+"),"");
			}else{
				ids=ids.replace(("+"+path),"");
				imgUrlCardImage=imgUrlCardImage.replace(("+"+path),"");
			}
		}
	}
	imgCountCardImage = imgCountCardImage-1;
	$("#cardImage").val(imgUrlCardImage);
}

//房本或车本图片删除
function deletePermitImage(idd,id){
	
	var lengths=idd.indexOf('Signature=')
	var route=idd.slice(0,lengths+10)+encodeURIComponent(idd.slice(lengths+10));
	var lengthss=id.indexOf('Signature=')
	var path=id.slice(0,lengthss+10)+encodeURIComponent(id.slice(lengthss+10));
	console.log(lengths)
	console.log(route)
	console.log(path)
	$("img[id='"+route+"']").attr("checked", true).remove();
	$("a[id='"+route+"']").attr("checked", true).remove();
	var ids=imgUrlPermitImage;
	var strs=new Array();
	strs=ids.split("+");
	for(i=0;i<strs.length;i++){
		if(strs.length==1){
		 ids=ids.replace(path,"");
		 imgUrlPermitImage=imgUrlPermitImage.replace(path,"");
		}
		if(strs.length>1){
			if(strs[0]==path){
				ids=ids.replace((path+"+"),"");
				imgUrlPermitImage=imgUrlPermitImage.replace((path+"+"),"");
			}else{
				ids=ids.replace(("+"+path),"");
				imgUrlPermitImage=imgUrlPermitImage.replace(("+"+path),"");
			}
		}
	}
	imgCountPermitImage = imgCountPermitImage-1;
	$("#permitImage").val(imgUrlPermitImage);

}

//行驶证图片删除
function deleteDriveImage(idd,id){
	
	var lengths=idd.indexOf('Signature=')
	var route=idd.slice(0,lengths+10)+encodeURIComponent(idd.slice(lengths+10));
	var lengthss=id.indexOf('Signature=')
	var path=id.slice(0,lengthss+10)+encodeURIComponent(id.slice(lengthss+10));
	console.log(lengths)
	console.log(route)
	console.log(path)
	$("img[id='"+route+"']").attr("checked", true).remove();
	$("a[id='"+route+"']").attr("checked", true).remove();
	var ids=imgUrlDriveImage;
	var strs=new Array();
	strs=ids.split("+");
	for(i=0;i<strs.length;i++){
		if(strs.length==1){
		 ids=ids.replace(path,"");
		 imgUrlDriveImage=imgUrlDriveImage.replace(path,"");
		}
		if(strs.length>1){
			if(strs[0]==path){
				ids=ids.replace((path+"+"),"");
				imgUrlDriveImage=imgUrlDriveImage.replace((path+"+"),"");
			}else{
				ids=ids.replace(("+"+path),"");
				imgUrlDriveImage=imgUrlDriveImage.replace(("+"+path),"");
			}
		}
	}
	imgCountDriveImage = imgCountDriveImage-1;
	$("#driveImage").val(imgUrlDriveImage);

}
//借款人征信报告删除
function deleteCreditImage(idd,id){
	
	var lengths=idd.indexOf('Signature=')
	var route=idd.slice(0,lengths+10)+encodeURIComponent(idd.slice(lengths+10));
	var lengthss=id.indexOf('Signature=')
	var path=id.slice(0,lengthss+10)+encodeURIComponent(id.slice(lengthss+10));
	console.log(lengths)
	console.log(route)
	console.log(path)
	$("img[id='"+route+"']").attr("checked", true).remove();
	$("a[id='"+route+"']").attr("checked", true).remove();
	var ids=imgUrlCreditImag;
	var strs=new Array();
	strs=ids.split("+");
	for(i=0;i<strs.length;i++){
		if(strs.length==1){
		 ids=ids.replace(path,"");
		 imgUrlCreditImag=imgUrlCreditImag.replace(path,"");
		}
		if(strs.length>1){
			if(strs[0]==path){
				ids=ids.replace((path+"+"),"");
				imgUrlCreditImag=imgUrlCreditImag.replace((path+"+"),"");
			}else{
				ids=ids.replace(("+"+path),"");
				imgUrlCreditImag=imgUrlCreditImag.replace(("+"+path),"");
			}
		}
	}
	imgCountCreditImage = imgCountCreditImage-1;
	$("#creditImage").val(imgUrlCreditImag);

}
function deleteImg(idd,id){
	var lengths=idd.indexOf('Signature=')
	var route=idd.slice(0,lengths+10)+encodeURIComponent(idd.slice(lengths+10));
	var lengthss=id.indexOf('Signature=')
	var path=id.slice(0,lengthss+10)+encodeURIComponent(id.slice(lengthss+10));
	console.log(lengths)
	console.log(route)
	console.log(path)
	$("img[id='"+route+"']").attr("checked", true).remove();
	$("a[id='"+route+"']").attr("checked", true).remove();
	var ids=imgUrl;
	var strs=new Array();
	strs=ids.split("+");
	for(i=0;i<strs.length;i++){
		if(strs.length==1){
		 ids=ids.replace(path,"");
		 imgUrl=imgUrl.replace(path,"");
		}
		if(strs.length>1){
			if(strs[0]==path){
				ids=ids.replace((path+"+"),"");
				imgUrl=imgUrl.replace((path+"+"),"");
			}else{
				ids=ids.replace(("+"+path),"");
				imgUrl=imgUrl.replace(("+"+path),"");
			}
		}
	}
	imgCount = imgCount-1;
	$("#url").html(ids);
	$("#imageUrl").val(imgUrl);
}

function deleteImgs(idd,id){
	var lengths=idd.indexOf('Signature=')
	var route=idd.slice(0,lengths+10)+encodeURIComponent(idd.slice(lengths+10));
	var lengthss=id.indexOf('Signature=')
	var path=id.slice(0,lengthss+10)+encodeURIComponent(id.slice(lengthss+10));
	console.log(lengths)
	console.log(route)
	console.log(path)
	$("img[id='"+route+"']").attr("checked", true).remove();
	$("a[id='"+route+"']").attr("checked", true).remove();
	var ids=imgUrls;
	var strs=new Array();
	strs=ids.split("+");
	for(i=0;i<strs.length;i++){
		if(strs.length==1){
		 ids=ids.replace(path,"");
		 imgUrls=imgUrls.replace(path,"");
		}
		if(strs.length>1){
			if(strs[0]==path){
				ids=ids.replace((path+"+"),"");
				imgUrls=imgUrls.replace((path+"+"),"");
			}else{
				ids=ids.replace(("+"+path),"");
				imgUrls=imgUrls.replace(("+"+path),"");
			}
		}
	}
	imgCount = imgCount-1;
	$("#imageUrls").val(imgUrls);
}

function sdeleteImg(idd,id){
	var lengths=idd.indexOf('Signature=')
	var route=idd.slice(0,lengths+10)+encodeURIComponent(idd.slice(lengths+10));
	var lengthss=id.indexOf('Signature=')
	var path=id.slice(0,lengthss+10)+encodeURIComponent(id.slice(lengthss+10));
	console.log(lengths)
	console.log(route)
	console.log(path)
	$("img[id='"+route+"']").attr("checked", true).remove();
	$("a[id='"+route+"']").attr("checked", true).remove();
	var ids=simgUrl;
	var strs=new Array();
	strs=ids.split("+");
	for(i=0;i<strs.length;i++){
		if(strs.length==1){
		 ids=ids.replace(path,"");
		 simgUrl=simgUrl.replace(path,"");
		}
		if(strs.length>1){
			if(strs[0]==path){
				ids=ids.replace((path+"+"),"");
				simgUrl=simgUrl.replace((path+"+"),"");
			}else{
				ids=ids.replace(("+"+path),"");
				simgUrl=simgUrl.replace(("+"+path),"");
			}
		}
	}
	imgCount = imgCount-1;
	$("#simageUrl").val(simgUrl);
}

function sdeleteImgs(idd,id){
	var lengths=idd.indexOf('Signature=')
	var route=idd.slice(0,lengths+10)+encodeURIComponent(idd.slice(lengths+10));
	var lengthss=id.indexOf('Signature=')
	var path=id.slice(0,lengthss+10)+encodeURIComponent(id.slice(lengthss+10));
	console.log(lengths)
	console.log(route)
	console.log(path)
	$("img[id='"+route+"']").attr("checked", true).remove();
	$("a[id='"+route+"']").attr("checked", true).remove();
	var ids=simgUrls;
	var strs=new Array();
	strs=ids.split("+");
	for(i=0;i<strs.length;i++){
		if(strs.length==1){
		 ids=ids.replace(path,"");
		 simgUrls=simgUrls.replace(path,"");
		}
		if(strs.length>1){
			if(strs[0]==path){
				ids=ids.replace((path+"+"),"");
				simgUrls=simgUrls.replace((path+"+"),"");
			}else{
				ids=ids.replace(("+"+path),"");
				simgUrls=simgUrls.replace(("+"+path),"");
			}
		}
	}
	imgCount = imgCount-1;
	$("#simageUrls").val(simgUrls);
}

function clearImg(){
	var id=$("#imageUrl").val();
	$("#img").children().remove(); 
	$("#imageUrl").val("");
	$("#url").html("");
	imgUrl="";
	ids="";
	imgCount=0;
}

function reloadPage(){
  location.reload();
}

/*表单检验   身份证*/
function checkCreditNo(){
	var acn=$("#appCreditNo").val();
	if(!acn){
		$("#acn").html("");
		return true;
	}
	var reg=/^(\d{15}$|^\d{18}$|^\d{17}(\d|X|x))$/;
	if(!reg.test(acn)){
		 $("#acn").html("身份证号格式不正确！");
		 return false;
	 }
	 $("#acn").html("");
	 return true;
}

function checkAppMateIdNumber() {
	var acn = $("#appMateIdNumber").val();
	var reg=/^(\d{15}$|^\d{18}$|^\d{17}(\d|X|x))$/;
	if(!reg.test(acn)){
		 $("#camin").html("身份证号格式不正确！");
	 }
	$("#camin").html("");
}

function checkAmount(){
	var amount=$("#loanAmount").val();
	if(!amount){
		$("#la").html("借款金额不能为空！");
		return false;
	}
	var reg=/^[1-9]+[0-9]*]*$/;
	if(!(reg.test(amount)&& amount%1000==0)){
		$("#la").html("必须为1000的整数倍！");
		return false;
	}
	$("#la").html("");
	return true;
}


function checkPurpose(){
	var pur=$("#loanPurpose").val();
	if(pur.length<3||pur.length>15){
		$("#lp").html("3~15个字符！");
		return false;
	}
	$("#lp").html("");
	return true;
}

function checkState(){
	var loanState=$("#loanState").val();
	loanState=$.trim(loanState);
	if(loanState.length<20||loanState.length>2000){
		$("#ls").html("请按提示正确输入！");
		return false;
	}
	$("#ls").html("");
	return true;
}

//验证通讯地址
function checkCommunicationAddress() {
	var appCommunicationAddress = $("#appCommunicationAddress").val();
	if(!appCommunicationAddress) {
		$("#ca").html("通讯地址不能为空");
		return false;
	}else {
		$("#ca").html("");
		return true;
	}
}

//验证通讯地址邮编
function checkPostalCode() {
	var appPostalCode = $("#appPostalCode").val();
	if(!appPostalCode) {
		$("#cpc").html("通讯地址邮编不能为空");
		return false;
	}else {
		$("#cpc").html("");
		return true;
	}
}

//验证第一联系人姓名
function checkFirstName() {
	var appFirstName = $("#appFirstName").val();
	if(!appFirstName) {
		$("#cfn").html("第一联系人姓名不能为空");
		return false;
	}else {
		$("#cfn").html("");
		return true;
	}
}

//验证第一联系人电话
function checkFirstPhone() {
	var appFirstPhone = $("#appFirstPhone").val();
	if(!appFirstPhone) {
		$("#cfp").html("第一联系人电话不能为空");
		return false;
	}else {
		$("#cfp").html("");
		return true;
	}
}

//验证单位名称
function checkCompany() {
	var appCompany = $("#appCompany").val();
	if(!appCompany) {
		$("#ccp").html("单位名称不能为空");
		return false;
	}else {
		$("#ccp").html("");
		return true;
	}
}

//验证居住地址
function checkResidentialAddress() {
	var residentialAddress = $("#residentialAddress").val();
	if(!residentialAddress) {
		$("#cra").html("居住地址不能为空");
		return false;
	}else {
		$("#cra").html("");
		return true;
	}
}

//验证居住地址邮编
function checkResidentialPostalCode() {
	var residentialPostalCode = $("#residentialPostalCode").val();
	if(!residentialPostalCode) {
		$("#crp").html("居住地址邮编不能为空");
		return false;
	}else {
		$("#crp").html("");
		return true;
	}
}

//验证居住年限
function checkResidentYear() {
	var residentYear = $("#residentYear").val();
	if(!residentYear) {
		$("#cry").html("居住年限不能为空");
		return false;
	}else {
		$("#cry").html("");
		return true;
	}
}

//验证服务费
function checkserviceCharge() {
	var serviceCharge = $("#serviceCharge").val();
	if(!serviceCharge) {
		$("#serviceCharges").html("服务费用不能为空");
		return false;
	}else {
		$("#serviceCharges").html("");
		return true;
	}
}

//验证担保机构
function GuarantyAgencys() {
	var GuarantyAgency=$("#GuarantyAgency").find("option:selected").text();
	console.log(GuarantyAgency)
	if(GuarantyAgency=='--请选择--' || GuarantyAgency=='' ){
		$("#ga").html("请选择担保机构");
		return false;
	}else{
		$("#ga").html("");
		return true;
	}
}

function submitRisk(){
	var creditNoFlag=checkCreditNo();
	var loanAmountFlag=checkAmount();
    var purposeFlag=checkPurpose();
    var stateFlag=checkState();
    var addressFlag = checkCommunicationAddress();
    var postalFlag = checkPostalCode();
    var firstNameFlag = checkFirstName();
    var firstPhoneFlag = checkFirstPhone();
    var companyFlag = checkCompany();
    var residentialAddressFlag = checkResidentialAddress();
    var residentialPostalCodeFlag = checkResidentialPostalCode();
    var residentYearFlag = checkResidentYear();
    var serviceChargeFlag = checkserviceCharge();
	if(creditNoFlag && loanAmountFlag && purposeFlag && stateFlag && addressFlag && postalFlag && checkFirstName && checkFirstPhone && companyFlag && residentialAddressFlag && residentialPostalCodeFlag && residentYearFlag && serviceChargeFlag){
		$("#saveRisk").submit();
	}
}

function saveRisk(){
	var creditNoFlag=checkCreditNo();
	if(creditNoFlag) {
		$("#flag").val("1");
		$("#saveRisk").submit();
	}
}

//判断服务费率是不是数字和小数点
function num(obj){
	obj.value = obj.value.replace(/[^\d.]/g,""); //清除"数字"和"."以外的字符
	obj.value = obj.value.replace(/^\./g,""); //验证第一个字符是数字
	obj.value = obj.value.replace(/\.{2,}/g,"."); //只保留第一个, 清除多余的
	obj.value = obj.value.replace(".","$#$").replace(/\./g,"").replace("$#$",".");
	obj.value = obj.value.replace(/^(\-)*(\d+)\.(\d\d).*$/,'$1$2.$3'); //只能输入两个小数
}
</script>
